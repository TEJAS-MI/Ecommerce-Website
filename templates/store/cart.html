{% extends 'store/main.html' %} 
{% load static %} 

{% block content %}
<div class="box-element" style="margin-bottom: 20px">
    <a class="btn btn-outline-dark" href="{% url 'store' %}">&#x2190; Continue Shopping</a>
    <br />
    <table class="table">
        <tr>
            <th><h5>Items: <strong>{{ order.get_cart_items }}</strong></h5></th>
            <th><h5>Total: <strong>${{ order.get_cart_total|floatformat:2 }}</strong></h5></th>
            <th><a style="float: right; margin: 5px" class="btn btn-success" href="{% url 'checkout' %}">Checkout</a></th>
        </tr>
    </table>
</div>
<hr>
<div class="box-element">
    <div class="cart-row">
        <div style="flex: 2"></div>
        <div style="flex: 2"><strong>Item</strong></div>
        <div style="flex: 1" class="text-center"><strong>Price</strong></div>
        <div style="flex: 1" class="text-center"><strong>Quantity</strong></div>
        <div style="flex: 1" class="text-center"><strong>Subtotal</strong></div>
    </div>

    {% for item in items %}
    <div class="cart-row">
        <div style="flex: 2">
            <img class="row-image" src="{% if item.product.image %}{{ item.product.image.url }}{% else %}{% static 'images/placeholder.png' %}{% endif %}" alt="{{ item.product.name }} image"/>
        </div>

        <div style="flex: 2">
            <p style="margin-left: 15px">{{ item.product.name }}</p>
        </div>

        <div style="flex: 1" class="text-center">
            <p>${{ item.product.price|floatformat:2 }}</p>
        </div>

        <div style="flex: 1" class="text-center">
            <div class="quantity-wrapper">
                <p class="quantity-number">{{ item.quantity }}</p>
                <div class="quantity-controls">
                    <a class="chg-quantity update-cart" data-product="{{ item.product.id }}" data-action="add">&#x25B2;</a>
                    <a class="chg-quantity update-cart" data-product="{{ item.product.id }}" data-action="remove">&#x25BC;</a>
                </div>
            </div>
        </div>

        <div style="flex: 1" class="text-center">
            <p>${{ item.get_total|floatformat:2 }}</p>
        </div>
    </div>
    <hr>
    {% empty %}
    <p>Your cart is empty. <a href="{% url 'store' %}">Continue shopping?</a></p>
    {% endfor %}
</div>

{% endblock content %}